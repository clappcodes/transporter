var __defProp = Object.defineProperty;
var __name = (target, value) => __defProp(target, "name", { value, configurable: true });
class Context {
  static {
    __name(this, "Context");
  }
  assign(obj) {
    return Object.assign(this, obj);
  }
  static assign(obj) {
    return new this().assign(obj);
  }
}
const context = /* @__PURE__ */ __name((init) => new Context().assign(init), "context");
const def = /* @__PURE__ */ __name((fn) => fn, "def");
const def2 = /* @__PURE__ */ __name((fn) => fn, "def2");
const a = def((ctx) => ctx.assign({ a: 1, m: ctx }));
const b = def((ctx) => ctx.assign({ b: 1 }));
const c = def((ctx) => Object.assign(ctx, { c: "sssd" }));
const handle = /* @__PURE__ */ __name((m, f, x) => {
  return (request) => {
    const _m = m(request);
    return _m ? f(request, _m) : x(request);
  };
}, "handle");
var api_util_default = {
  fetch: handle(
    (req) => new URLPattern({
      pathname: "/foo/:id"
    }).exec(req.url)?.pathname.groups,
    (req, ctx) => new Response("Hello " + req.url + " " + ctx.id),
    (req) => new Response("Not Found " + req.url, { status: 404 })
  )
};
export {
  api_util_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vYXBwL2FwaS51dGlsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBzYXRpc2ZpZXMgfSBmcm9tIFwiaHR0cHM6Ly9kZW5vLmxhbmQveC9zZW12ZXJAdjEuNC4xL21vZC50c1wiO1xuaW1wb3J0IHsgUmVxdWVzdE1ldGhvZCB9IGZyb20gXCIuLi90eXBlcy50c1wiO1xuaW1wb3J0IHsgY3JlYXRlUmVxdWVzdCB9IGZyb20gXCIuL2FwaS50c1wiO1xuXG50eXBlIENUWDxJPiA9IENvbnRleHQ8ST4gJiBJO1xuXG5jbGFzcyBDb250ZXh0PEkgPSB7fT4ge1xuICBhc3NpZ248VD4ob2JqOiBUKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24odGhpcywgb2JqKTtcbiAgfVxuICBzdGF0aWMgYXNzaWduPFQ+KG9iajogVCkge1xuICAgIHJldHVybiBuZXcgdGhpcygpLmFzc2lnbihvYmopO1xuICB9XG59XG5cbmNvbnN0IGNvbnRleHQgPSA8ST4oaW5pdDogSSkgPT4gbmV3IENvbnRleHQ8ST4oKS5hc3NpZ24oaW5pdCk7XG5cbmNvbnN0IGRlZiA9IDxGIGV4dGVuZHMgPEMgZXh0ZW5kcyBDb250ZXh0PihjdHg6IEMpID0+IHVua25vd24+KGZuOiBGKSA9PiBmbjtcbmNvbnN0IGRlZjIgPSA8RiBleHRlbmRzIChjdHg6IENvbnRleHQpID0+IGFueT4oZm46IEYpID0+IGZuO1xuXG5jb25zdCBhID0gZGVmKChjdHgpID0+IGN0eC5hc3NpZ24oeyBhOiAxLCBtOiBjdHggfSkpO1xuY29uc3QgYiA9IGRlZigoY3R4KSA9PiBjdHguYXNzaWduKHsgYjogMSB9KSk7XG5jb25zdCBjID0gZGVmKChjdHgpID0+IE9iamVjdC5hc3NpZ24oY3R4LCB7IGM6IFwic3NzZFwiIH0pKTtcblxuaW50ZXJmYWNlIFNlcnZlciB7XG4gIGZldGNoKHJlcXVlc3Q6IFJlcXVlc3QsIGNvbnRleHQ/OiBhbnkpOiBSZXNwb25zZSB8IFByb21pc2U8UmVzcG9uc2U+O1xuICBtYXRjaChyZXF1ZXN0OiBSZXF1ZXN0KTogbnVsbCB8IHt9O1xufVxuXG5jb25zdCBoYW5kbGUgPSA8XG4gIE0gZXh0ZW5kcyAocmVxOiBSZXF1ZXN0KSA9PiBhbnksXG4gIEYgZXh0ZW5kcyAocmVxOiBSZXF1ZXN0LCBjdHg6IE5vbk51bGxhYmxlPFJldHVyblR5cGU8TT4+KSA9PiBSZXNwb25zZSxcbj4obTogTSwgZjogRiwgeDogU2VydmVyW1wiZmV0Y2hcIl0pID0+IHtcbiAgcmV0dXJuIChyZXF1ZXN0OiBSZXF1ZXN0KSA9PiB7XG4gICAgY29uc3QgX20gPSBtKHJlcXVlc3QpO1xuICAgIHJldHVybiBfbSA/IGYocmVxdWVzdCwgX20pIDogeChyZXF1ZXN0KTtcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZmV0Y2g6IGhhbmRsZShcbiAgICAocmVxKSA9PlxuICAgICAgbmV3IFVSTFBhdHRlcm4oe1xuICAgICAgICBwYXRobmFtZTogXCIvZm9vLzppZFwiLFxuICAgICAgfSkuZXhlYyhyZXEudXJsKT8ucGF0aG5hbWUuZ3JvdXBzIGFzIHsgaWQ6IHN0cmluZyB9LFxuICAgIChyZXEsIGN0eCkgPT4gbmV3IFJlc3BvbnNlKFwiSGVsbG8gXCIgKyByZXEudXJsICsgXCIgXCIgKyBjdHguaWQpLFxuICAgIChyZXEpID0+IG5ldyBSZXNwb25zZShcIk5vdCBGb3VuZCBcIiArIHJlcS51cmwsIHsgc3RhdHVzOiA0MDQgfSksXG4gICksXG59O1xuIl0sCiAgIm1hcHBpbmdzIjogIjs7QUFNQSxNQUFNLFFBQWdCO0FBQUEsRUFOdEIsT0FNc0I7QUFBQTtBQUFBO0FBQUEsRUFDcEIsT0FBVSxLQUFRO0FBQ2hCLFdBQU8sT0FBTyxPQUFPLE1BQU0sR0FBRztBQUFBLEVBQ2hDO0FBQUEsRUFDQSxPQUFPLE9BQVUsS0FBUTtBQUN2QixXQUFPLElBQUksS0FBSyxFQUFFLE9BQU8sR0FBRztBQUFBLEVBQzlCO0FBQ0Y7QUFFQSxNQUFNLFVBQVUsd0JBQUksU0FBWSxJQUFJLFFBQVcsRUFBRSxPQUFPLElBQUksR0FBNUM7QUFFaEIsTUFBTSxNQUFNLHdCQUFtRCxPQUFVLElBQTdEO0FBQ1osTUFBTSxPQUFPLHdCQUFrQyxPQUFVLElBQTVDO0FBRWIsTUFBTSxJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksT0FBTyxFQUFFLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDO0FBQ25ELE1BQU0sSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQzNDLE1BQU0sSUFBSSxJQUFJLENBQUMsUUFBUSxPQUFPLE9BQU8sS0FBSyxFQUFFLEdBQUcsT0FBTyxDQUFDLENBQUM7QUFPeEQsTUFBTSxTQUFTLHdCQUdiLEdBQU0sR0FBTSxNQUF1QjtBQUNuQyxTQUFPLENBQUMsWUFBcUI7QUFDM0IsVUFBTSxLQUFLLEVBQUUsT0FBTztBQUNwQixXQUFPLEtBQUssRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLE9BQU87QUFBQSxFQUN4QztBQUNGLEdBUmU7QUFVZixJQUFPLG1CQUFRO0FBQUEsRUFDYixPQUFPO0FBQUEsSUFDTCxDQUFDLFFBQ0MsSUFBSSxXQUFXO0FBQUEsTUFDYixVQUFVO0FBQUEsSUFDWixDQUFDLEVBQUUsS0FBSyxJQUFJLEdBQUcsR0FBRyxTQUFTO0FBQUEsSUFDN0IsQ0FBQyxLQUFLLFFBQVEsSUFBSSxTQUFTLFdBQVcsSUFBSSxNQUFNLE1BQU0sSUFBSSxFQUFFO0FBQUEsSUFDNUQsQ0FBQyxRQUFRLElBQUksU0FBUyxlQUFlLElBQUksS0FBSyxFQUFFLFFBQVEsSUFBSSxDQUFDO0FBQUEsRUFDL0Q7QUFDRjsiLAogICJuYW1lcyI6IFtdCn0K
